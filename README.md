# AI Test Agent

AI Test Agent is a Python-based tool that allows users to automatically generate, execute, and evaluate unit tests based on user-submitted Python code. This application utilizes a large language model (via the Groq API) to generate PyTest-compatible tests and can be used through both a web interface and a command-line interface.

## Features

- Automated test case generation using LLMs.
- Generates clean, isolated PyTest test functions (no duplicates or comments).
- Executes generated tests in a temporary, sandboxed environment.
- Detailed test output with individual and summarized execution results.
- Generates downloadable PDF reports containing:
  - User-submitted code
  - Generated test cases
  - Full PyTest output
  - Final test summary
- Usable as a standalone CLI tool or Flask web application.
- Modular logic (LLM and test processing isolated in `test_runner.py`).

## Technologies Used

- Python 3.8+
- Flask (web interface)
- PyTest (test execution engine)
- ReportLab (PDF report generation)
- Groq API with LLaMA 3 model (LLM for test generation)
- dotenv (environment variable management)

## Installation and Setup

### Prerequisites

- Python 3.8 or higher
- Valid Groq API key (available at https://console.groq.com)

### Installation Steps

```bash
git clone https://github.com/Cobb-ukr/ai-test-agent
cd ai-test-agent

# Create a virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: ./venv/Scripts/activate

# Install dependencies
pip install -r requirements.txt

# Add your API key (or create a .env file in the root directory and paste the api key in the following format: GROQ_API_KEY=your_api_key_here )
echo GROQ_API_KEY=your_api_key_here > .env
```

## Running the Web Application

```bash
python app.py
```

Then navigate to `http://localhost:5000` in your browser.

### Web Usage

- Paste a Python function into the web form.
- Click "Generate & Run Tests".
- Review the automatically generated test cases.
- View real-time execution output and summary.
- Download a printable PDF report of the results.

## Running via Command Line

You can run test generation and execution separately from the command line using:

```bash
python test_runner.py
```

This will:
- Use LLM to generate test functions based on a pre-set Python function.
- Execute the generated test code with PyTest.
- Output the generated test code, test summary, and full logs in the terminal.

## File Structure

```
tester/
├── app.py                 # Flask application logic
├── test_runner.py         # Core logic to communicate with LLM and run tests
├── .env                   # Contains GROQ_API_KEY (excluded from Git)
├── requirements.txt       # Python dependencies
│
├── templates/
│   └── index.html         # Web UI template
│
├── static/
│   └── index.css          # Optional CSS for styling
│
├── reports/
│   └── *.pdf              # Downloadable PDF reports generated by the app
│
└── README.md              # Project documentation
```

## Example Output

A sample user function:

```python
def is_prime(n):
    if n <= 1:
        return False
    for i in range(2, int(n ** 0.5) + 1):
        if n % i == 0:
            return False
    return True
```

Generated PyTest output:

```python
from user_code import is_prime

def test_is_prime_with_2():
    assert is_prime(2)

def test_is_prime_with_4():
    assert not is_prime(4)

def test_is_prime_with_large_prime():
    assert is_prime(101)
```

Test result summary:

```
collected 3 items

test_code.py ... [100%]
3 passed in 0.02s
```

## Planned Enhancements

- Multi-language support (JavaScript, Java, etc.)
- Integration with other AI test case platforms (e.g., testRigor, Workik)
- Visual HTML report rendering
- Zip test run folders into bundles for download
- Auto-detect tested function name

## License

MIT License © 2025 - Your Name or Organization
